<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.learning.exam.dao.mapper.PaperMapper">
    <select id="findPapersByCondition" resultType="TbPaper" >
        SELECT t.* FROM tb_user u,tb_paper t,tb_course c
        WHERE
        t.course_id=c.id AND t.c_uid=u.id
        <if test="typeKey != null and typeKey!=''">
            AND  t.paper_type=#{typeKey}
        </if>
        <if test="configKey != null and configKey!=''">
            AND t.config_status=#{configKey}
        </if>
        <if test="courseKey != null and courseKey!=''">
            AND  c.id=#{courseKey}
        </if>
        <if test="nameKey != null and nameKey!=''">
            AND t.paper_name like #{nameKey}
        </if>
        <if test="userNameKey != null and userNameKey!=''">
            AND u.name like #{userNameKey}
        </if>
    </select>
</mapper>